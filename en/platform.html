<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Platform · Robot Skill Store</title>
<link href="../assets/css/style.css?v=6.77.44" rel="stylesheet"/>
</head>
<body>
<header class="topbar">
<div class="topbar-inner">
<a class="brand" href="index.html">
<img alt="Robot Skill Store logo" class="brand-mark logo-img" src="../assets/media/rss_logo.png"/>
<span class="brand-name">RobotSkillStore</span>
</a>
<nav aria-label="Primary" class="topnav"><a class="toplink" href="index.html">Home</a><a class="toplink" href="lifecycle.html">Skill Lifecycle</a><a class="toplink" href="platform.html">Platform</a><a class="toplink" href="concepts.html">Concepts</a><a class="toplink" href="skills.html">Certified Skills</a><a class="toplink" href="deployment.html">Deployment</a><a class="toplink" href="docs/index.html">Docs</a><a class="toplink" href="contact.html">Contact</a></nav>
<div class="top-actions"><button aria-label="Switch language" class="iconbtn" data-current="en" id="langToggle" title="Language" type="button"><span class="icon">EN/中</span><span class="label">中文</span></button>
<button aria-label="Toggle theme" class="iconbtn" id="themeToggle" title="Appearance" type="button">
<span class="icon">☾</span>
<span class="label">Appearance</span>
</button>
</div>
</div>
</header>
<div class="layout">
<main class="content" id="content">

<section class="section-plain">
  <h1>Platform</h1>
  <div class="onboarding">
    <p><strong>Purpose</strong>RSS defines how robot skills are supplied, governed, and consumed across organizations.</p>
    <p><strong>What this page covers</strong>How suppliers register skills, how validation &amp; certification produce trust, and how users consume evidence-backed skills on the platform.</p>
    <div class="onboarding-line onboarding-anchor">
      <div class="onboarding-label"><strong>Lifecycle Anchor</strong></div>
      <div class="rss-lifecycle-bar compact" data-stage="register,validate,certify" data-compact="1"></div>
    </div>
  </div>
</section>

<p class="lead">What the RSS Platform Provides</p>



<section class="section">
  <h2 id="runtime-pipeline">Platform runtime pipeline</h2>
  <p class="tight">This pipeline is taken from the current RSS Platform stack (v1.0.4.12). Validation produces <em>Runs</em> + <em>Evidence</em>; certification computes governance state from those immutable records.</p>
  <div class="pipeline" aria-label="Platform runtime pipeline">
    <div class="pipe-row top">
      <div class="pipe-step"><div class="pipe-title">1) Register</div><div class="pipe-body">POST <code>/skills</code><br/>JSONSchema validation (<code>validation.py</code>)</div></div>
      <div class="pipe-arrow">➜</div>
      <div class="pipe-step"><div class="pipe-title">2) Execute / Validate</div><div class="pipe-body">POST <code>/runs</code> or <code>/runs/submit</code><br/>Run record + context</div></div>
      <div class="pipe-arrow">➜</div>
      <div class="pipe-step"><div class="pipe-title">3) Capture Evidence</div><div class="pipe-body">POST <code>/runs/{run_id}/artifacts</code><br/>GET <code>/runs/{run_id}/events</code></div></div>
    </div>

    <div class="pipe-row bottom" style="margin-top:10px;">
      <div class="pipe-step eval"><div class="pipe-title">4) Evaluate</div><div class="pipe-body">GET <code>/runs/{run_id}</code><br/>Outcome + constraints + metrics</div></div>
      <div class="pipe-arrow">➜</div>
      <div class="pipe-step certify"><div class="pipe-title">5) Certify / Govern</div><div class="pipe-body">GET <code>/skills/{skill}/{ver}/governance</code><br/><code>governance.py</code> rules + CI</div></div>
      <div class="pipe-arrow">➜</div>
      <div class="pipe-step publish"><div class="pipe-title">6) Publish (Public)</div><div class="pipe-body">GET <code>/public/v1/skills</code><br/>GET <code>/public/v1/skills/{skill_id}</code></div></div>
    </div>
  </div>
  <p class="muted" style="margin-top:10px;">UI entrypoints (via Gateway): <code>/viewer/</code> for evidence browsing, and <code>/public/v1/*</code> for website embedding.</p>
</section>

<section class="section">
  <h2 id="validation">Validation: real modules, real data</h2>
  <p>In RSS Platform, <strong>validation</strong> means every execution becomes a platform-managed <em>Run</em> with immutable context and evidence.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Run creation</strong>: <code>POST /runs</code> (or <code>POST /runs/submit</code>) creates a Run record bound to <code>(skill_id, version)</code> + profile + parameters.</li>
    <li><strong>Evidence ingestion</strong>: <code>POST /runs/{run_id}/artifacts</code> attaches artifacts (logs, mp4, traces). Storage backend is <code>LocalArtifactStore</code> or <code>S3ArtifactStore</code> (<code>storage.py</code>).</li>
    <li><strong>Trace & events</strong>: <code>GET /runs/{run_id}/events</code> returns structured events; trace indexing is queued (see <code>queueing.py</code>).</li>
    <li><strong>Read model</strong>: <code>GET /runs/{run_id}</code> is the source of truth for outcome + primary constraint + reason fields that drive certification.</li>
  </ul>
  <pre class="codeblock list-align" data-title="Core API routes (validation)">
Core API routes (validation)
- POST /skills
- POST /runs
- POST /runs/submit
- GET  /runs/{run_id}
- POST /runs/{run_id}/artifacts
- GET  /runs/{run_id}/artifacts
- GET  /runs/{run_id}/events
  </pre>
</section>

<section class="section">
  <h2 id="certification-details">Certification & governance: computed from evidence</h2>
  <p>Certification in RSS Platform is <strong>evidence-driven</strong>. Governance state is computed from historical Run windows using explicit rules (success rate, violations, regressions).</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Governance snapshot</strong>: <code>GET /skills/{skill_id}/{version}/governance</code> runs <code>compute_governance()</code> to produce state (<code>ACTIVE / DEGRADED / QUARANTINED</code>) + reasons + recommendations.</li>
    <li><strong>Policy evaluation</strong>: <code>POST /governance/policies/eval</code> evaluates a window against a policy (min_n, success threshold, violation cap, regression drop).</li>
    <li><strong>Public rollups</strong>: <code>POST /admin/public/v1/rollup</code> refreshes cached public stats; websites consume <code>/public/v1/skills*</code> with stable ETag + cache headers.</li>
  </ul>
  <pre class="codeblock list-align" data-title="Core API routes (certification)">
Core API routes (certification)
- GET  /skills/{skill_id}/{version}/governance
- POST /governance/policies/eval
- POST /admin/public/v1/rollup
- GET  /public/v1/skills
- GET  /public/v1/skills/{skill_id}
  </pre>
</section>

<section class="section">
  <h2 id="skill-registry">Skill Registry</h2>
  <p>Publish skills as stable capability contracts (schema, constraints, versioning). In the API service, a Skill Spec is schema-validated before it is accepted.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Validate spec on ingest</strong>: JSON Schema (Draft 2020-12) via <code>validate_skill_spec()</code>.</li>
    <li><strong>Create / list skills</strong>: <code>POST /skills</code>, <code>GET /skills</code>, <code>GET /skills/{skill_id}</code>, <code>GET /skills/{skill_id}/{version}</code>.</li>
    <li><strong>Bind governance taxonomy</strong>: <code>GET /skills/{skill_id}/{version}/taxonomy</code>.</li>
  </ul>
</section>

<section class="section">
  <h2 id="execution-engine">Validation execution (Runs)</h2>
  <p>Validation is executed as platform-managed <strong>Runs</strong>. A Run binds: Skill Version + profile (robot/TCP/environment) + parameters, then produces immutable records and events.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Create a run</strong>: <code>POST /runs</code> (stores request, enforces quotas).</li>
    <li><strong>Submit for execution</strong>: <code>POST /runs/submit</code> (enqueue worker execution; indexes traces).</li>
    <li><strong>Read run state</strong>: <code>GET /runs/{run_id}</code> and per-skill listing <code>GET /skills/{skill_id}/{version}/runs</code>.</li>
    <li><strong>Trace / events</strong>: <code>GET /runs/{run_id}/events</code> (used to reconstruct what happened, step-by-step).</li>
  </ul>
  <p class="muted" style="margin-top:10px;">Outcome parsing (SUCCESS/FAIL + primary constraint + reason) is normalized from evidence so governance can compute comparable metrics.</p>
</section>

<section class="section">
  <h2 id="evidence-store">Evidence &amp; Artifact Store</h2>
  <p>Artifacts are stored either on local filesystem or S3/MinIO (configurable). Every artifact is linked to a Run, so validation results are auditable and reproducible.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Upload artifacts</strong>: <code>POST /runs/{run_id}/artifacts</code> (logs, videos, reports, telemetry dumps).</li>
    <li><strong>List artifacts</strong>: <code>GET /runs/{run_id}/artifacts</code>.</li>
    <li><strong>Fetch / download</strong>: <code>GET /artifacts/{artifact_id}</code> and presigned links via <code>GET /artifacts/{artifact_id}/url</code>.</li>
    <li><strong>Jobs</strong>: <code>GET /runs/{run_id}/jobs</code> (background processing / indexing status).</li>
  </ul>
</section>

<section class="section">
  <h2 id="auth-anon-read">Auth, anon-read, and X-API-Key</h2>
  <p>RSS Platform separates <strong>public read</strong> (for websites and sharing) from <strong>authenticated operations</strong> (write, execution, admin). The switch is controlled by <code>RSP_AUTH_ALLOW_ANON_READ</code>.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Public read path</strong>: when <code>RSP_AUTH_ALLOW_ANON_READ=1</code>, the website can read aggregated skill metadata without credentials via <code>/public/v1/*</code>.</li>
    <li><strong>Authenticated path</strong>: for non-public endpoints (create runs, upload artifacts, policy/admin actions), clients must provide an API key header: <code>X-API-Key: &lt;key&gt;</code>.</li>
    <li><strong>Default posture</strong>: keep anon-read off in production unless you intentionally expose public stats; the platform can still publish curated rollups while keeping raw runs private.</li>
  </ul>
  <pre class="codeblock list-align" data-title="Auth / anon-read / X-API-Key">
Environment flags
- RSP_AUTH_ALLOW_ANON_READ=1            # allow GET /public/v1/* without credentials
- X-API-Key: &lt;key&gt;                     # required for non-public routes

Public read routes (no key if anon-read enabled)
- GET  /public/v1/skills
- GET  /public/v1/skills/{skill_id}

Authenticated examples (key required)
- POST /runs
- POST /runs/submit
- POST /runs/{run_id}/artifacts
- POST /admin/public/v1/rollup
  </pre>
  <p class="muted" style="margin-top:10px;">Rule of thumb: <code>/public/v1</code> is for reading curated, cacheable summaries; everything that mutates state or accesses raw evidence stays behind auth.</p>
</section>

<section class="section">
  <h2 id="artifact-backends">Artifact store backends: local vs S3/MinIO</h2>
  <p>The artifact store is pluggable. The platform selects a backend with <code>RSP_ARTIFACT_STORE</code> and serves downloads either directly (local) or via <strong>presigned URLs</strong> (S3/MinIO) so large files do not overload the API service.</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Local filesystem</strong>: artifacts are stored on the API/worker host; <code>GET /artifacts/{artifact_id}</code> streams bytes through the platform.</li>
    <li><strong>S3/MinIO</strong>: artifacts are stored as objects; the platform issues time-limited presigned URLs for upload/download.</li>
    <li><strong>Presign flow</strong>: UI requests a URL → platform signs → browser/worker transfers bytes directly to storage → platform keeps immutable links in the Run record.</li>
  </ul>
  <pre class="codeblock list-align" data-title="Artifact store: local vs S3/MinIO">
Backend selection
- RSP_ARTIFACT_STORE=local             # store on local disk
- RSP_ARTIFACT_STORE=s3                # store on S3/MinIO (object storage)

Presigned URL flow (S3/MinIO)
1) List artifacts:        GET  /runs/{run_id}/artifacts
2) Request download URL:  GET  /artifacts/{artifact_id}/url
3) Platform returns:      { url, expires_at }
4) Client downloads:      GET  &lt;presigned-url&gt;  (directly from MinIO/S3)

Optional upload flow
1) Request upload URL:    POST /artifacts/presign (or POST /runs/{run_id}/artifacts with "presign")
2) Client uploads:        PUT  &lt;presigned-url&gt;
3) Platform records:      artifact metadata linked to Run
  </pre>
  <p class="muted" style="margin-top:10px;">Why presign: artifact traffic can be GB-scale (videos, telemetry). Presigned URLs keep the control plane (API) lightweight while preserving traceability.</p>
</section>

<section class="section">
  <h2 id="certification">Certification &amp; Governance</h2>
  <p>Certification is computed from evidence windows. The platform aggregates Run outcomes, constraint violations, and regression signals, then produces a <em>governance snapshot</em> (ACTIVE / DEGRADED / QUARANTINED).</p>
  <ul class="tight" style="margin-top:10px;">
    <li><strong>Per-skill governance snapshot</strong>: <code>GET /skills/{skill_id}/{version}/governance</code>.</li>
    <li><strong>Policy evaluation (what-if)</strong>: <code>POST /governance/policies/eval</code> (test thresholds and blocklists).</li>
    <li><strong>Public rollups for website</strong>: <code>GET /public/v1/skills</code>, <code>GET /public/v1/skills/{skill_id}</code>.</li>
    <li><strong>Admin refresh</strong>: <code>POST /admin/public/v1/rollup</code> (recompute cached public stats).</li>
  </ul>
  <p class="muted" style="margin-top:10px;">Typical certification rules include: minimum run count, minimum success rate, maximum violation rate, and recent regression detection.</p>
</section>
</main>
<aside aria-label="On this page" class="toc">
<div class="toc-title">On this page</div>
<nav class="toc-nav" id="tocNav"></nav>
</aside>
</div>
<script src="../assets/config.js?v=6.77.44"></script>
<script>/*RSS_PLATFORM_BAR_FIX*/try{if(window.__rss_renderLifecycleBar){document.querySelectorAll(".rss-lifecycle-bar").forEach(b=>window.__rss_renderLifecycleBar(b));}}catch(e){}</script>
<script src="../assets/js/site.js?v=6.77.44"></script></body>
</html>
